"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expand=expand;const balanced_match_1=require("@isaacs/balanced-match"),escSlash="\0SLASH"+Math.random()+"\0",escOpen="\0OPEN"+Math.random()+"\0",escClose="\0CLOSE"+Math.random()+"\0",escComma="\0COMMA"+Math.random()+"\0",escPeriod="\0PERIOD"+Math.random()+"\0",escSlashPattern=new RegExp(escSlash,"g"),escOpenPattern=new RegExp(escOpen,"g"),escClosePattern=new RegExp(escClose,"g"),escCommaPattern=new RegExp(escComma,"g"),escPeriodPattern=new RegExp(escPeriod,"g"),slashPattern=/\\\\/g,openPattern=/\\{/g,closePattern=/\\}/g,commaPattern=/\\,/g,periodPattern=/\\./g;function numeric(e){return isNaN(e)?e.charCodeAt(0):parseInt(e,10)}function escapeBraces(e){return e.replace(slashPattern,escSlash).replace(openPattern,escOpen).replace(closePattern,escClose).replace(commaPattern,escComma).replace(periodPattern,escPeriod)}function unescapeBraces(e){return e.replace(escSlashPattern,"\\").replace(escOpenPattern,"{").replace(escClosePattern,"}").replace(escCommaPattern,",").replace(escPeriodPattern,".")}function parseCommaParts(e){if(!e)return[""];const t=[],n=(0,balanced_match_1.balanced)("{","}",e);if(!n)return e.split(",");const{pre:a,body:r,post:s}=n,c=a.split(",");c[c.length-1]+="{"+r+"}";const o=parseCommaParts(s);return s.length&&(c[c.length-1]+=o.shift(),c.push.apply(c,o)),t.push.apply(t,c),t}function expand(e){return e?("{}"===e.slice(0,2)&&(e="\\{\\}"+e.slice(2)),expand_(escapeBraces(e),!0).map(unescapeBraces)):[]}function embrace(e){return"{"+e+"}"}function isPadded(e){return/^-?0\d/.test(e)}function lte(e,t){return e<=t}function gte(e,t){return e>=t}function expand_(e,t){const n=[],a=(0,balanced_match_1.balanced)("{","}",e);if(!a)return[e];const r=a.pre,s=a.post.length?expand_(a.post,!1):[""];if(/\$$/.test(a.pre))for(let e=0;e<s.length;e++){const t=r+"{"+a.body+"}"+s[e];n.push(t)}else{const c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(a.body),o=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(a.body),p=c||o,l=a.body.indexOf(",")>=0;if(!p&&!l)return a.post.match(/,(?!,).*\}/)?expand_(e=a.pre+"{"+a.body+escClose+a.post):[e];let d,i;if(p)d=a.body.split(/\.\./);else if(d=parseCommaParts(a.body),1===d.length&&void 0!==d[0]&&(d=expand_(d[0],!1).map(embrace),1===d.length))return s.map(e=>a.pre+d[0]+e);if(p&&void 0!==d[0]&&void 0!==d[1]){const e=numeric(d[0]),t=numeric(d[1]),n=Math.max(d[0].length,d[1].length);let a=3===d.length&&void 0!==d[2]?Math.abs(numeric(d[2])):1,r=lte;t<e&&(a*=-1,r=gte);const s=d.some(isPadded);i=[];for(let c=e;r(c,t);c+=a){let e;if(o)e=String.fromCharCode(c),"\\"===e&&(e="");else if(e=String(c),s){const t=n-e.length;if(t>0){const n=new Array(t+1).join("0");e=c<0?"-"+n+e.slice(1):n+e}}i.push(e)}}else{i=[];for(let e=0;e<d.length;e++)i.push.apply(i,expand_(d[e],!1))}for(let e=0;e<i.length;e++)for(let a=0;a<s.length;a++){const c=r+i[e]+s[a];(!t||p||c)&&n.push(c)}}return n}