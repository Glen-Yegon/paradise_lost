var split=require("../../../utils/split"),startsAsUrl=require("./starts-as-url"),OptimizationLevel=require("../../../options/optimization-level").OptimizationLevel,EXPRESSION_PATTERN=/^expression\(.*\)$/,ANY_FUNCTION_PATTERN=/^(-(?:moz|ms|o|webkit)-[a-z-]+|[a-z-]+)\((.+)\)$/,TOKEN_SEPARATOR_PATTERN=/([\s,/])/,DOT_ZERO_PATTERN=/(^|\D)\.0+(\D|$)/g,FRACTION_PATTERN=/\.([1-9]*)0+(\D|$)/g,LEADING_ZERO_FRACTION_PATTERN=/(^|\D)0\.(\d)/g,MINUS_ZERO_FRACTION_PATTERN=/([^\w\d-]|^)-0([^.]|$)/g,ZERO_PREFIXED_UNIT_PATTERN=/(^|\s)0+([1-9])/g;function optimizeRecursively(e){var T,i;return startsAsUrl(e)||EXPRESSION_PATTERN.test(e)?e:(T=ANY_FUNCTION_PATTERN.exec(e))?(i=split(T[2],TOKEN_SEPARATOR_PATTERN).map(function(e){return optimizeRecursively(e)}),T[1]+"("+i.join("")+")"):optimizeFractions(e)}function optimizeFractions(e){return-1==e.indexOf("0")?e:(e.indexOf("-")>-1&&(e=e.replace(MINUS_ZERO_FRACTION_PATTERN,"$10$2").replace(MINUS_ZERO_FRACTION_PATTERN,"$10$2")),e.replace(ZERO_PREFIXED_UNIT_PATTERN,"$1$2").replace(DOT_ZERO_PATTERN,"$10$2").replace(FRACTION_PATTERN,function(e,T,i){return(T.length>0?".":"")+T+i}).replace(LEADING_ZERO_FRACTION_PATTERN,"$1.$2"))}var plugin={level1:{value:function(e,T,i){return i.level[OptimizationLevel.One].replaceZeroUnits?optimizeRecursively(T):T}}};module.exports=plugin;