var Token=require("../../tokenizer/token"),serializeRules=require("../../writer/one-time").rules,serializeValue=require("../../writer/one-time").value;function extractProperties(e){var r,t,o,i,a,n,s=[];if(e[0]==Token.RULE)for(r=!/[.+>~]/.test(serializeRules(e[1])),a=0,n=e[2].length;a<n;a++)(t=e[2][a])[0]==Token.PROPERTY&&0!==(o=t[1][1]).length&&(i=serializeValue(t,a),s.push([o,i,findNameRoot(o),e[2][a],o+":"+i,e[1],r]));else if(e[0]==Token.NESTED_BLOCK)for(a=0,n=e[2].length;a<n;a++)s=s.concat(extractProperties(e[2][a]));return s}function findNameRoot(e){return"list-style"==e?e:e.indexOf("-radius")>0?"border-radius":"border-collapse"==e||"border-spacing"==e||"border-image"==e?e:0===e.indexOf("border-")&&/^border-\w+-\w+$/.test(e)?e.match(/border-\w+/)[0]:0===e.indexOf("border-")&&/^border-\w+$/.test(e)?"border":0===e.indexOf("text-")||"-chrome-"==e?e:e.replace(/^-\w+-/,"").match(/([a-zA-Z]+)/)[0].toLowerCase()}module.exports=extractProperties;