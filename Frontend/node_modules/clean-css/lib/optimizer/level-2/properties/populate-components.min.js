var configuration=require("../../configuration"),InvalidPropertyError=require("../../invalid-property-error");function populateComponents(n,e,o){for(var r,a,t,i=n.length-1;i>=0;i--){var l=n[i],u=configuration[l.name];if(!l.dynamic&&u&&u.shorthand){if(onlyValueIsVariable(l,e)||moreThanOneValueIsVariable(l,e)){l.optimizable=!1;continue}l.shorthand=!0,l.dirty=!0;try{if(l.components=u.breakUp(l,configuration,e),u.shorthandComponents)for(a=0,t=l.components.length;a<t;a++)(r=l.components[a]).components=configuration[r.name].breakUp(r,configuration,e)}catch(n){if(!(n instanceof InvalidPropertyError))throw n;l.components=[],o.push(n.message)}l.components.length>0?l.multiplex=l.components[0].multiplex:l.unused=!0}}}function onlyValueIsVariable(n,e){return 1==n.value.length&&e.isVariable(n.value[0][1])}function moreThanOneValueIsVariable(n,e){return n.value.length>1&&n.value.filter(function(n){return e.isVariable(n[1])}).length>1}module.exports=populateComponents;