var Token=require("../../tokenizer/token"),serializeBody=require("../../writer/one-time").body,serializeRules=require("../../writer/one-time").rules;function removeDuplicates(e){for(var r,i,o,l,t={},n=[],s=0,u=e.length;s<u;s++)(i=e[s])[0]==Token.RULE&&(t[r=serializeRules(i[1])]&&1==t[r].length?n.push(r):t[r]=t[r]||[],t[r].push(s));for(s=0,u=n.length;s<u;s++){l=[];for(var a=t[r=n[s]].length-1;a>=0;a--)i=e[t[r][a]],o=serializeBody(i[2]),l.indexOf(o)>-1?i[2]=[]:l.push(o)}}module.exports=removeDuplicates;