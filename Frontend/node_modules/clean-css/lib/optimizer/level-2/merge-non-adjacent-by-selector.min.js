var canReorder=require("./reorderable").canReorder,extractProperties=require("./extract-properties"),optimizeProperties=require("./properties/optimize"),serializeRules=require("../../writer/one-time").rules,Token=require("../../tokenizer/token");function mergeNonAdjacentBySelector(e,r){var t,o=r.cache.specificity,i={},a=[];for(t=e.length-1;t>=0;t--)if(e[t][0]==Token.RULE&&0!==e[t][2].length){var n=serializeRules(e[t][1]);i[n]=[t].concat(i[n]||[]),2==i[n].length&&a.push(n)}for(t=a.length-1;t>=0;t--){var p=i[a[t]];e:for(var c=p.length-1;c>0;c--){var s=p[c-1],l=e[s],u=p[c],f=e[u];r:for(var v=1;v>=-1;v-=2){for(var h=1==v,y=h?s+1:u-1,d=h?u:s,g=h?1:-1,m=h?l:f,R=h?f:l,z=extractProperties(m);y!=d;){var q=extractProperties(e[y]);y+=g;var x=h?canReorder(z,q,o):canReorder(q,z,o);if(!x&&!h)continue e;if(!x&&h)continue r}h?(Array.prototype.push.apply(m[2],R[2]),R[2]=m[2]):Array.prototype.push.apply(R[2],m[2]),optimizeProperties(R[2],!0,!0,r),m[2]=[]}}}}module.exports=mergeNonAdjacentBySelector;