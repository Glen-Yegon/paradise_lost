var Marker=require("../tokenizer/marker");function is(e,r,t){return t?r.test(e):e===r}function split(e,r){var t,n=Marker.OPEN_ROUND_BRACKET,i=Marker.CLOSE_ROUND_BRACKET,s=0,u=0,f=0,l=e.length,o=[],p="object"==typeof r&&"exec"in r;if(!p&&-1==e.indexOf(r))return[e];if(-1==e.indexOf(n))return e.split(r);for(;u<l;)e[u]==n?s++:e[u]==i&&s--,0===s&&u>0&&u+1<l&&is(e[u],r,p)&&(o.push(e.substring(f,u)),p&&r.exec(e[u]).length>1&&o.push(e[u]),f=u+1),u++;return f<u+1&&(is((t=e.substring(f))[t.length-1],r,p)&&(t=t.substring(0,t.length-1)),o.push(t)),o}module.exports=split;