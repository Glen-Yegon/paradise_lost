import{initializeApp}from"https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";import{getFirestore,collection,addDoc,getDocs,query,where}from"https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore.js";const firebaseConfig={apiKey:"AIzaSyBBCH5RKBkCR4SXRPrgPpcfOaS_sYGf7NE",authDomain:"paradise-lost-861d9.firebaseapp.com",projectId:"paradise-lost-861d9",storageBucket:"paradise-lost-861d9.firebasestorage.app",messagingSenderId:"939828037395",appId:"1:939828037395:web:532c345c83165ca478bce6",measurementId:"G-BSVKDESYYY"},app=initializeApp(firebaseConfig),db=getFirestore(app),toggleBtn=document.getElementById("toggleMode"),signupForm=document.getElementById("signupForm"),confirmForm=document.getElementById("confirmForm"),formTitle=document.getElementById("formTitle");toggleBtn.addEventListener("click",()=>{"none"!==signupForm.style.display?(signupForm.style.display="none",confirmForm.style.display="block",formTitle.innerText="Confirm Your Account",toggleBtn.innerText="Don't have an account? Sign Up"):(signupForm.style.display="block",confirmForm.style.display="none",formTitle.innerText="Join Paradise Lost",toggleBtn.innerText="Already have an account? Confirm")}),signupForm.addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("name").value.trim(),o=document.getElementById("email").value.trim().toLowerCase(),r=document.getElementById("password").value.trim();if(t&&o&&r)try{await addDoc(collection(db,"users"),{name:t,email:o,password:r,createdAt:new Date}),alert("✅ Account created successfully!"),signupForm.reset()}catch(e){console.error("❌ Error adding document: ",e),alert("Something went wrong while saving your details.")}else alert("Please fill in all fields.")}),confirmForm.addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("confirmEmail").value.trim().toLowerCase(),o=document.getElementById("confirmPassword").value.trim();if(t&&o)try{const e=query(collection(db,"users"),where("email","==",t),where("password","==",o));(await getDocs(e)).empty?alert("❌ No matching account found."):(alert("✅ Account confirmed!"),confirmForm.reset())}catch(e){console.error("❌ Error confirming account: ",e),alert("Something went wrong during confirmation.")}else alert("Please fill in all fields.")});